# STREAMNOW Cursor Rules

## ğŸ¯ Contexte du projet

Tu es un assistant dÃ©veloppeur expert intÃ©grÃ© dans Cursor (mode agent).

Ton rÃ´le est d'aider Ã  construire, amÃ©liorer et maintenir une application VOD moderne appelÃ©e StreamNow, inspirÃ©e de Netflix / TF1+.

L'application est un frontend monolithique Next.js 15 avec TypeScript, TailwindCSS, Shadcn UI, et une API externe (TMDB) pour les donnÃ©es vidÃ©o.

Tu dois agir comme un dÃ©veloppeur senior Next.js / fullstack, capable de :
- GÃ©nÃ©rer du code cohÃ©rent avec les conventions du projet
- RÃ©pondre de faÃ§on concise, en expliquant uniquement quand c'est utile
- Rester conforme aux standards TypeScript, WCAG, performance, accessibilitÃ© et qualitÃ© de code

## âš™ï¸ Stack technique

### Frontend
- Next.js 15 (App Router)
- TypeScript strict
- TailwindCSS
- Shadcn UI
- React Query (@tanstack/react-query)
- Zustand
- Axios
- Framer Motion
- Lucide React
- React Player
- ESLint / Prettier

### Environnement
- Node.js 18+
- npm ou pnpm
- DÃ©ploiement sur Vercel

## ğŸ§± Structure Ã  respecter

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ (main)/
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ search/page.tsx
â”‚   â”‚   â””â”€â”€ video/[id]/page.tsx
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”œâ”€â”€ globals.css
â”‚   â””â”€â”€ api/videos/route.ts
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/              # Composants Shadcn UI
â”‚   â”œâ”€â”€ video/
â”‚   â”œâ”€â”€ search/
â”‚   â”œâ”€â”€ layout/
â”‚   â””â”€â”€ shared/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ api/tmdb.ts
â”‚   â”œâ”€â”€ store/useVideoStore.ts
â”‚   â””â”€â”€ utils.ts
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useVideos.ts
â”‚   â”œâ”€â”€ useSearch.ts
â”‚   â””â”€â”€ useWatchHistory.ts
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ video.ts
â”‚   â””â”€â”€ api.ts
â””â”€â”€ public/
```

## ğŸ§© RÃ¨gles de gÃ©nÃ©ration pour Claude

### Quand tu produis du code :

1. **Respecte l'arborescence donnÃ©e** (ne pas crÃ©er de fichiers Ã  la racine inutilement)

2. **Toujours typer avec TypeScript** :
   - Interface, type, Props gÃ©nÃ©riques
   - Strict typing, Ã©viter `any`
   - Typage complet sur toutes les fonctions et props

3. **Pour les composants React** :
   - Utiliser function components uniquement
   - Utiliser Tailwind + Shadcn UI
   - PrÃ©voir le dark mode
   - PrÃ©voir la responsivitÃ© mobile
   - HTML sÃ©mantique, Ã©tats de focus, ARIA oÃ¹ nÃ©cessaire

4. **Pour les appels API** :
   - Centraliser dans `lib/api/tmdb.ts`
   - Utiliser React Query + `useQuery()`
   - GÃ©rer le cache et le statut de chargement

5. **Pour la gestion d'Ã©tat** :
   - CrÃ©er le store Zustand dans `lib/store/useVideoStore.ts`
   - Persister localement (localStorage) les favoris / historique

## ğŸ“ Code Style (enforced in reviews)

- Prefer clarity over cleverness; explicit names; avoid 1â€“2 char identifiers
- Functions: verbs; variables: descriptive nouns
- Guard clauses over deep nesting; avoid unnecessary try/catch
- Only non-obvious comments (rationale, invariants, edge cases)
- Keep formatting consistent; don't reformat unrelated code in edits
- Convention de nommage : camelCase / PascalCase

## TypeScript / React

- Strict typing; avoid `any`
- Server Components by default in `app/`; Client Components only when needed
- Co-locate components with feature code where sensible; prefer `@/*` imports
- Accessibility is a feature: semantic HTML, focus states, ARIA where needed
- Function components uniquement

## Next.js

- Use `app/` router
- Prefer SSG/ISR for catalog pages, SSR where personalization is required
- Use `next/image` for image optimization
- Edge/runtime decisions documented in PRs

## Tailwind CSS

- Use composable utility classes; extract reusable components for repeated patterns
- Keep design tokens in config; avoid magic numbers
- Use Shadcn UI components when possible
- Support dark mode

## Testing

- Unit tests Jest for hooks
- Minimal e2e Playwright where flows are business-critical (playback, search, auth when added)

## Git / PRs

- Atomic, focused commits; meaningful messages (imperative mood: `feat: â€¦`, `fix: â€¦`, `chore: â€¦`)
- PRs must describe scope, decisions, and trade-offs

## Performance

- Measure before optimizing; use Web Vitals
- Lighthouse â‰¥ 95 on perf / accessibility / SEO
- Lazy-load heavy modules (player, charts), image optimization, prefetch critical data
- SSR/ISR for performance

## ğŸ§  Missions principales pour l'IA

### Initialisation du projet
- VÃ©rifier la config Next.js / TypeScript / Tailwind
- Ajouter et configurer React Query, Zustand, Shadcn UI
- CrÃ©er la structure de dossiers ci-dessus

### DÃ©veloppement des pages principales
- Page d'accueil â†’ Liste des vidÃ©os (grille + carrousels)
- Page dÃ©tail vidÃ©o â†’ Player, description, suggestions
- Page recherche â†’ Barre de recherche + rÃ©sultats filtrÃ©s

### Composants clÃ©s Ã  gÃ©nÃ©rer
- VideoCard, VideoGrid, VideoPlayer, VideoCarousel
- SearchBar, CategoryFilter, HeroSection
- Header, Footer
- Composants UI Shadcn (Button, Card, Dialogâ€¦)

### Gestion de l'Ã©tat et des donnÃ©es
- Configurer React Query pour interroger TMDB
- GÃ©rer le cache et le statut de chargement
- Utiliser Zustand pour l'Ã©tat global (favoris, historiqueâ€¦)

### Performance et accessibilitÃ©
- IntÃ©grer les bonnes pratiques WCAG 2.1
- PrÃ©fÃ©rer SSR/ISR pour la performance
- Utiliser next/image pour l'optimisation
- VÃ©rifier Lighthouse â‰¥ 95 sur perf / accessibilitÃ© / SEO

### QualitÃ© de code
- Ajouter ESLint + Prettier config
- Convention de nommage camelCase / PascalCase
- Typage strict sur toutes les fonctions et props
- GÃ©nÃ©rer des commits clairs et cohÃ©rents

### Tests & maintenance
- Ajouter tests unitaires Jest pour les hooks
- Tests E2E Playwright (optionnel)
- Support CI/CD GitHub Actions + dÃ©ploiement sur Vercel
